[tox]
envlist = py310, py311, py312, lint, format, mypy
isolated_build = true

[testenv]
deps =
    pytest
    pytest-cov
commands =
    pytest {posargs}

[testenv:lint]
description = Run Ruff for linting
deps = ruff
commands = ruff check .

[testenv:format]
description = Run Ruff for formatting
deps = ruff
commands = ruff format . --diff

[testenv:mypy]
description = Run mypy for type checking
deps = mypy
commands = mypy --install-types --non-interactive earthdatastore

[testenv:coverage]
deps =
    pytest
    pytest-cov
commands =
    pytest --cov=earthdatastore --cov-report=xml

[gh-actions]
python =
    3.10: py310, lint, format, coverage, mypy
    3.11: py311, lint, format, coverage, mypy
    3.12: py312, lint, format, coverage, mypy
